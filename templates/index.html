<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Churn Predictor</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="bg-light">
    <div class="container">
        <div class="card mt-4">
            <div class="card-header text-center">
                <h2>üìä Customer Churn Prediction</h2>
                <p>Fill in customer details to predict churn risk.</p>
            </div>
            <div class="card-body">
                <form id="predictForm">

                    <div class="form-group">
                        <label>Gender:</label>
                        <select class="form-control" name="gender">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Senior Citizen:</label>
                        <select class="form-control" name="SeniorCitizen">
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Partner:</label>
                        <select class="form-control" name="Partner">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Dependents:</label>
                        <select class="form-control" name="Dependents">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Phone Service:</label>
                        <select class="form-control" name="PhoneService">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Multiple Lines:</label>
                        <select class="form-control" name="MultipleLines">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                            <option value="No phone service">No phone service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Internet Service:</label>
                        <select class="form-control" name="InternetService">
                            <option value="No">No</option>
                            <option value="DSL">DSL</option>
                            <option value="Fiber Optic">Fiber Optic</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>OnlineSecurity:</label>
                        <select class="form-control" name="OnlineSecurity">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>OnlineBackup:</label>
                        <select class="form-control" name="OnlineBackup">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>DeviceProtection:</label>
                        <select class="form-control" name="DeviceProtection">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>TechSupport:</label>
                        <select class="form-control" name="TechSupport">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>StreamingTV:</label>
                        <select class="form-control" name="StreamingTV">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>StreamingMovies:</label>
                        <select class="form-control" name="StreamingMovies">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                            <option value="No internet service">No internet service</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Contract Type:</label>
                        <select class="form-control" name="Contract">
                            <option value="Month-to-month">Month-to-Month</option>
                            <option value="One year">One Year</option>
                            <option value="Two year">Two Year</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>PaperlessBilling:</label>
                        <select class="form-control" name="PaperlessBilling">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Payment Method:</label>
                        <select class="form-control" name="PaymentMethod">
                            <option value="Electronic check">Electronic Check</option>
                            <option value="Mailed check">Mailed Check</option>
                            <option value="Bank transfer (automatic)">Bank Transfer (Auto)</option>
                            <option value="Credit card (automatic)">Credit Card (Auto)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tenure Group:</label>
                        <select class="form-control" name="tenure_group">
                            <option value="1 - 12">1-12</option>
                            <option value="13 - 24">13-24</option>
                            <option value="25 - 36">25-36</option>
                            <option value="37 - 48">37-48</option>
                            <option value="49 - 60">49-60</option>
                            <option value="61 - 72">61-72</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Monthly Charges ($):</label>
                        <input type="number" step="0.01" class="form-control" name="MonthlyCharges" required>
                    </div>

                    <div class="form-group">
                        <label>Total Charges ($):</label>
                        <input type="number" step="0.01" class="form-control" name="TotalCharges" required>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">Predict Churn</button>
                </form>

                <div class="text-center mt-4">
                    <h4 id="prediction" class="text-info"></h4>
                </div>
            </div>
        </div>
    </div>

    <script>
        $("#predictForm").submit(function (event) {
            event.preventDefault();
            $("#prediction").html("‚è≥ Predicting...");

            $.ajax({
                url: "/predict",
                type: "POST",
                data: $(this).serialize(),
                success: function (response) {
                    $("#prediction").html(response.prediction);
                },
                error: function () {
                    $("#prediction").html("‚ùå Error in prediction");
                }
            });
        });
    </script>
</body>
</html>
